<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
    <form>
        <div class="card mx-auto" style="max-width: 1150px; border: none;">
            <div class="card-body">
                <h1 class="card-title">Survey Questions</h1>
                <hr>
                <h3 class="card-text" style="line-height: 2">About You</h3>
                <p>Name (Required)</p>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" aria-label="name" aria-describedby="name" id="name" required>
                </div>
                <p>Link to Photo Image (Required)</p>
                <div class="input-group mb-3">
                    <input type="url" class="form-control" aria-label="link to photo" aria-describedby="photoLink" id="photoLink" required>
                </div>
                <hr>

                <h3 class="card-text" style="line-height: 2">Question 1</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q1">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <h3 class="card-text" style="line-height: 2">Question 2</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q2">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <h3 class="card-text" style="line-height: 2">Question 3</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q3">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <h3 class="card-text" style="line-height: 2">Question 4</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q4">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <h3 class="card-text" style="line-height: 2">Question 5</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q5">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <h3 class="card-text" style="line-height: 2">Question 6</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q6">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <h3 class="card-text" style="line-height: 2">Question 7</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q7">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <h3 class="card-text" style="line-height: 2">Question 8</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q8">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <h3 class="card-text" style="line-height: 2">Question 9</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q9">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <h3 class="card-text" style="line-height: 2">Question 10</h3>
                <p>Question Text</p>
                <div class="input-group mb-3">
                    <select class="chosen-select questions" id="q10">
                        <option value="default">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <a id="submitSurvey" class="btn btn-primary p-3">Submit</a>
            </div>
        </div>
    </form>  
    <div class="card mx-auto" style="max-width: 1150px; border: none; flex-direction: row">
        <a target="_blank" href="/api/friends">API Friends List&nbsp;</a>|<a target="_blank" href="/github">&nbsp;GitHub Repo</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

    <!-- Handles how the form data is sent to the server -->
    <script type="text/javascript">
    $("#submitSurvey").on("click tap", function(event) {
        event.preventDefault();

        //Form Validation (Checks that all values have been filled out and name passes name validation):
        if ($("#name").val().trim() === "" || $("#photoLink").val().trim() === "" || $(".questions").val() === "default") {
            //
            //ALSO SANITIZE THIS DATA!!!
            //
            //MAKE ME A MODAL!
            //
            //
            alert("You must enter a value for each field.");
        } else {
            //Intialize an array to hold scores temporarily
            var scoreArray = [];
            //Captures each score and pushes each one to the scoreArray in order
            var q1 = $('#q1').val();
            scoreArray.push(q1);
            var q2 = $('#q2').val();
            scoreArray.push(q2);
            var q3 = $('#q3').val();
            scoreArray.push(q3);
            var q4 = $('#q4').val();
            scoreArray.push(q4);
            var q5 = $('#q5').val();
            scoreArray.push(q5);
            var q6 = $('#q6').val();
            scoreArray.push(q6);
            var q7 = $('#q7').val();
            scoreArray.push(q7);
            var q8 = $('#q8').val();
            scoreArray.push(q8);
            var q9 = $('#q9').val();
            scoreArray.push(q9);
            var q10 = $('#q10').val();
            scoreArray.push(q10);

            // Create a new friend object and set values
            var newFriend = {
                name: $("#name").val().trim(),
                photo: $("#photoLink").val().trim(),
                scores: scoreArray
            };
        
            console.log(newFriend); 

            // Clears the form on submit
            $("#name").val("");
            $("#photoLink").val("");
            $(".questions").val('default');
            //Also clears score array
            scoreArray = [];

            //Sends the new friend object to the api and returns a modal containing the most compatible friend
            $.post("/api/friends", newFriend, function(data) {


                //return the modal with the info about the best friend match here


            });
        }
    });
    </script>
</body>
</html>